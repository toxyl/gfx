<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GFXS Renderer</title>
  <link rel="stylesheet" href="styles.css">
  <!-- CodeMirror CSS & JS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.css" integrity="sha512-uf06llspW44/LZpHzHT6qBOIVODjWtv4MxCricRxkzvopAlSWnTf6hpZTFxuuZcuNE9CBQhqE0Seu1CoRk84nQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/codemirror.min.js" integrity="sha512-sSWQXoxIkE0G4/xqLngx5C53oOZCgFRxWE79CvMX2X0IKx14W3j9Dpz/2MpRh58xb2W/h+Y4WAHJQA0qMMuxJg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/mode/simple.min.js" integrity="sha512-CGM6DWPHs250F/m90YZ9NEiEUhd9a4+u8wAzeKC6uHzZbYyt9/e2dLC5BGGB6Y0HtEdZQdSDYjDsoTyNGdMrMA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="gfxs-mode.js"></script>
  <!-- Split.js for resizable panes -->
  <script src="https://unpkg.com/split.js/dist/split.min.js"></script>
</head>
<body>
  <div id="main-container">
    <!-- Editors Container -->
    <div id="editors-container">
      <div class="editor-section" id="composition-section">
        <div class="section-header">Composition</div>
        <div id="filter-controls">
          <select id="filter-dropdown">
            <option value="">-- Select a composition --</option>
          </select>
          <button id="save-filter-btn">Save</button>
          <button id="force-render-btn">Render</button>
        </div>
        <textarea id="gfxse-composition"></textarea>
      </div>
      <div class="editor-section" id="vars-section">
        <div class="section-header">Vars</div>
        <textarea id="gfxse-vars"></textarea>
      </div>
      <div class="editor-section" id="layers-section">
        <div class="section-header">Layers</div>
        <textarea id="gfxse-layers"></textarea>
      </div>
      <div class="editor-section" id="filters-section">
        <div class="section-header">Filters</div>
        <textarea id="gfxse-filters"></textarea>
      </div>
    </div>
    <!-- Preview Container -->
    <div id="preview-container">
      <div id="preview-tabs">
        <button class="tab-button active" data-mode="side-by-side">Side by Side</button>
        <button class="tab-button" data-mode="both">Both</button>
        <div id="auto-render-timer"></div>
      </div>
      <!-- Side-by-Side Mode: Two Panes arranged left-to-right -->
      <div id="preview-side-by-side" class="preview-mode">
        <div class="pane">
          <div class="tab-header">Original</div>
          <div class="image-wrapper">
            <img id="original-image" alt="Original" />
          </div>
        </div>
        <div class="pane">
          <div class="tab-header">Processed</div>
          <div class="image-wrapper">
            <img id="processed-image" alt="Processed" />
          </div>
        </div>
      </div>
      <!-- Both Mode: Single Pane -->
      <div id="preview-both" class="preview-mode" style="display:none;">
        <div class="image-wrapper">
          <img id="preview-image" alt="Processed Output" />
        </div>
      </div>
    </div>
  </div>
  <!-- Full-screen overlay for batch processing -->
  <div id="overlay-full" class="overlay" style="display:none;">
    <div class="overlay-content">Processing... please wait</div>
  </div>
  <script src="gfxs-mode.js"></script>
  <script src="script.js"></script>
</body>
</html>
